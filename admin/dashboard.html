<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Dashboard Admin - Dev Roblox Shop</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css?v=1.1">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Theme Toggle Button -->
    <button id="themeToggleBtn" style="
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 999;
        padding: 12px 16px;
        background: #0047ab;
        color: white;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        font-size: 18px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
    " title="Toggle Dark Mode">ðŸŒ™</button>
    <!-- Header -->
    <header class="admin-header">
        <div class="header-content">
            <h1><i class="fas fa-cogs"></i> Admin Panel</h1>
            <div class="header-right">
                <span id="adminUser" class="admin-username"></span>
                <button id="logoutBtn" class="btn-logout">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </header>

    <div class="admin-container">
        <!-- Sidebar -->
        <aside class="admin-sidebar">
            <nav class="admin-nav">
                <button class="nav-item active" data-section="pesanan">
                    <i class="fas fa-list"></i> Pesanan
                </button>
                <button class="nav-item" data-section="akun">
                    <i class="fas fa-user"></i> Akun Roblox
                </button>
                <button class="nav-item" data-section="promo">
                    <i class="fas fa-ticket-alt"></i> Kode Promo
                </button>
                <button class="nav-item" data-section="flash-sale">
                    <i class="fas fa-fire"></i> Flash Sale
                </button>
                <button class="nav-item" data-section="website-status">
                    <i class="fas fa-toggle-on"></i> Buka/Tutup
                </button>
                <button class="nav-item" data-section="stok-produk">
                    <i class="fas fa-boxes"></i> Stok Produk
                </button>
                <button class="nav-item" data-section="customers">
                    <i class="fas fa-users"></i> Pelanggan
                </button>
                <button class="nav-item" data-section="analytics">
                    <i class="fas fa-chart-bar"></i> Analytics
                </button>
                <button class="nav-item" data-section="settings">
                    <i class="fas fa-cog"></i> Pengaturan
                </button>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="admin-content">
            <!-- STATISTIK SECTION -->
            <section class="statistics-section">
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-day"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Pesanan Hari Ini</h3>
                            <p class="stat-value" id="orders-today">0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Produk Paling Populer</h3>
                            <p class="stat-value" id="most-popular-product">Tidak ada data</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-money-bill"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Total Revenue</h3>
                            <p class="stat-value" id="total-revenue">Rp 0</p>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-content">
                            <h3>Total Pesanan</h3>
                            <p class="stat-value" id="total-orders">0</p>
                        </div>
                    </div>
                </div>
            </section>
            <!-- PESANAN SECTION -->
            <section id="pesanan-section" class="section active">
                <div class="section-header">
                    <h2><i class="fas fa-list"></i> Daftar Pesanan</h2>
                    <div class="section-actions">
                        <button id="refreshBtn" class="btn-primary">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <button id="addPesananBtn" class="btn-primary">
                            <i class="fas fa-plus"></i> Tambah Pesanan
                        </button>
                    </div>
                </div>

                <div id="pesananList" class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>ID Pesanan</th>
                                <th>Username</th>
                                <th>Item</th>
                                <th>Harga</th>
                                <th>Status</th>
                                <th>WhatsApp</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="pesananTableBody">
                        </tbody>
                    </table>
                </div>
                <div id="pesananEmpty" class="empty-state">Belum ada pesanan</div>
            </section>

            <!-- AKUN ROBLOX SECTION -->
            <section id="akun-section" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-user"></i> Stok Akun Roblox</h2>
                    <button id="addAkunBtn" class="btn-primary">
                        <i class="fas fa-plus"></i> Tambah Akun
                    </button>
                </div>

                <div id="akunList" class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Profil</th>
                                <th>Username</th>
                                <th>Harga</th>
                                <th>Stok</th>
                                <th>Deskripsi</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="akunTableBody">
                        </tbody>
                    </table>
                </div>
                <div id="akunEmpty" class="empty-state">Belum ada akun</div>
            </section>

            <!-- PROMO SECTION -->
            <section id="promo-section" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-ticket-alt"></i> Kode Promo</h2>
                    <button id="addPromoBtn" class="btn-primary">
                        <i class="fas fa-plus"></i> Tambah Promo
                    </button>
                </div>

                <div id="promoList" class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Kode</th>
                                <th>Diskon (%)</th>
                                <th>Berlaku Hingga</th>
                                <th>Status</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="promoTableBody">
                        </tbody>
                    </table>
                </div>
                <div id="promoEmpty" class="empty-state">Belum ada promo</div>
            </section>

            <!-- FLASH SALE SECTION -->
            <section id="flash-sale-section" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-fire"></i> Flash Sale</h2>
                    <button id="addFlashSaleBtn" class="btn-primary">
                        <i class="fas fa-plus"></i> Buat Flash Sale
                    </button>
                </div>

                <div id="flashSaleList" class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Produk</th>
                                <th>Harga Normal</th>
                                <th>Harga Flash Sale</th>
                                <th>Mulai</th>
                                <th>Berakhir</th>
                                <th>Status</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="flashSaleTableBody">
                        </tbody>
                    </table>
                </div>
                <div id="flashSaleEmpty" class="empty-state">Belum ada flash sale</div>
            </section>

            <!-- WEBSITE STATUS SECTION -->
            <section id="website-status-section" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-toggle-on"></i> Atur Buka/Tutup Website</h2>
                </div>

                <div class="status-box">
                    <div class="status-content">
                        <h3>Status Toko</h3>
                        <p id="websiteStatusText" class="status-text">Sedang Buka</p>
                        <div class="status-toggle">
                            <button id="toggleWebsiteBtn" class="btn-primary">
                                <i class="fas fa-lock"></i> Tutup Website
                            </button>
                        </div>
                    </div>
                </div>

                <div class="note-box">
                    <h4>Catatan:</h4>
                    <p>Jika website ditutup, pelanggan akan melihat pop-up bahwa toko sedang tutup sementara dan tidak bisa mengakses halaman.</p>
                </div>
            </section>

            <!-- STOK PRODUK SECTION -->
            <section id="stok-produk-section" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-boxes"></i> Stok Produk</h2>
                </div>

                <div id="stokProdukList" class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Produk</th>
                                <th>Stok Saat Ini</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="stokProdukTableBody">
                        </tbody>
                    </table>
                </div>
                <div id="stokProdukEmpty" class="empty-state">Belum ada produk</div>
            </section>

            <!-- CUSTOMERS SECTION -->
            <section id="customers-section" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> Data Pelanggan</h2>
                    <div class="section-actions">
                        <input type="text" id="customerSearchInput" placeholder="Cari pelanggan..." style="padding: 8px 12px; border: 1px solid #dee2e6; border-radius: 6px;">
                        <button id="customerSearchBtn" class="btn-primary"><i class="fas fa-search"></i> Cari</button>
                        <button id="exportCustomersBtn" class="btn-primary"><i class="fas fa-download"></i> Export</button>
                    </div>
                </div>

                <div class="data-table">
                    <table>
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Email</th>
                                <th>No. HP</th>
                                <th>Total Pesanan</th>
                                <th>Status</th>
                                <th>Last Login</th>
                            </tr>
                        </thead>
                        <tbody id="customersTableBody">
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ANALYTICS SECTION -->
            <section id="analytics-section" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-chart-bar"></i> Analytics & Laporan</h2>
                </div>

                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div class="stat-card" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 10px; color: white;">
                        <h3 style="margin: 0 0 15px 0;">Pesanan Pending</h3>
                        <p id="pending-orders" style="font-size: 2.5rem; margin: 0; font-weight: bold;">0</p>
                    </div>

                    <div class="stat-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 25px; border-radius: 10px; color: white;">
                        <h3 style="margin: 0 0 15px 0;">Pesanan Selesai</h3>
                        <p id="completed-orders" style="font-size: 2.5rem; margin: 0; font-weight: bold;">0</p>
                    </div>

                    <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 25px; border-radius: 10px; color: white;">
                        <h3 style="margin: 0 0 15px 0;">Total Pelanggan</h3>
                        <p id="total-customers" style="font-size: 2.5rem; margin: 0; font-weight: bold;">0</p>
                    </div>
                </div>

                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h3 style="margin-top: 0;">Filter Pesanan</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div>
                            <label>Status</label>
                            <select id="orderFilterStatus" style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 6px;">
                                <option value="">Semua</option>
                                <option value="pending">Pending</option>
                                <option value="diproses">Diproses</option>
                                <option value="selesai">Selesai</option>
                                <option value="dibatalkan">Dibatalkan</option>
                            </select>
                        </div>
                        <div>
                            <label>Dari Tanggal</label>
                            <input type="date" id="orderFilterStartDate" style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 6px;">
                        </div>
                        <div>
                            <label>Sampai Tanggal</label>
                            <input type="date" id="orderFilterEndDate" style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 6px;">
                        </div>
                        <div>
                            <label>Min Harga</label>
                            <input type="number" id="orderFilterMinPrice" placeholder="0" style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 6px;">
                        </div>
                        <div>
                            <label>Max Harga</label>
                            <input type="number" id="orderFilterMaxPrice" placeholder="999999" style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 6px;">
                        </div>
                        <div>
                            <label>Cari</label>
                            <input type="text" id="orderFilterSearch" placeholder="ID/Username/Item..." style="width: 100%; padding: 8px; border: 1px solid #dee2e6; border-radius: 6px;">
                        </div>
                    </div>
                    <div style="margin-top: 15px;">
                        <button id="orderFilterBtn" class="btn-primary"><i class="fas fa-filter"></i> Filter</button>
                        <button class="btn-reset-filter" style="background: #6c757d; color: white; border: none; padding: 10px 18px; border-radius: 6px; cursor: pointer; margin-left: 10px;"><i class="fas fa-redo"></i> Reset</button>
                    </div>
                </div>
            </section>

            <!-- SETTINGS SECTION -->
            <section id="settings-section" class="section" data-permission="admin">
                <div class="section-header">
                    <h2><i class="fas fa-cog"></i> Pengaturan & Backup</h2>
                </div>

                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h3 style="margin-top: 0;">Backup & Restore Data</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Buat backup semua data atau restore dari file backup yang sudah disimpan.</p>
                    <button id="backupBtn" class="btn-primary" style="margin-right: 10px;">
                        <i class="fas fa-download"></i> Buat Backup
                    </button>
                    <button id="restoreBtn" class="btn-primary" style="background: #6c757d;">
                        <i class="fas fa-upload"></i> Restore Backup
                    </button>
                </div>

                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h3 style="margin-top: 0;">Laporan & Log</h3>
                    <p style="color: #6c757d; margin-bottom: 15px;">Lihat audit log dan semua aktivitas admin.</p>
                    <button id="viewAuditLogBtn" class="btn-primary">
                        <i class="fas fa-list"></i> Lihat Audit Log
                    </button>
                </div>

                <div style="background: #e8f4f8; padding: 20px; border-radius: 8px; border-left: 4px solid #0047ab;">
                    <h3 style="margin-top: 0; color: #0047ab;">ðŸ’¾ Export Laporan</h3>
                    <p style="color: #333; margin-bottom: 15px;">Export data dalam format CSV untuk analisis lebih lanjut.</p>
                    <button id="exportOrdersBtn" class="btn-primary" style="margin-right: 10px;">
                        <i class="fas fa-file-csv"></i> Export Pesanan
                    </button>
                    <button id="exportProductsBtn" class="btn-primary" style="margin-right: 10px;">
                        <i class="fas fa-file-csv"></i> Export Produk
                    </button>
                </div>
            </section>
        </main>
    </div>

    <!-- MODAL PESANAN -->
    <div id="pesananModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Form Pesanan</h2>
            <form id="pesananForm">
                <input type="hidden" id="pesananId">
                <div class="form-group">
                    <label>Username Pelanggan</label>
                    <input type="text" id="pesananUsername" required>
                </div>
                <div class="form-group">
                    <label>Item</label>
                    <input type="text" id="pesananItem" required>
                </div>
                <div class="form-group">
                    <label>Harga</label>
                    <input type="number" id="pesananHarga" required>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select id="pesananStatus" required>
                        <option value="Pending">Pending</option>
                        <option value="Diproses">Diproses</option>
                        <option value="Selesai">Selesai</option>
                        <option value="Dibatalkan">Dibatalkan</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>WhatsApp</label>
                    <input type="text" id="pesananWhatsapp" required>
                </div>
                <button type="submit" class="btn-primary">Simpan</button>
            </form>
        </div>
    </div>

    <!-- MODAL AKUN -->
    <div id="akunModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Form Akun Roblox</h2>
            <form id="akunForm">
                <input type="hidden" id="akunId">
                <div class="form-group">
                    <label>Profil/Nama Akun</label>
                    <input type="text" id="akunProfile" required>
                </div>
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="akunUsername" required>
                </div>
                <div class="form-group">
                    <label>Harga</label>
                    <input type="number" id="akunHarga" required>
                </div>
                <div class="form-group">
                    <label>Stok</label>
                    <input type="number" id="akunStok" required>
                </div>
                <div class="form-group">
                    <label>Deskripsi</label>
                    <textarea id="akunDeskripsi"></textarea>
                </div>
                <button type="submit" class="btn-primary">Simpan</button>
            </form>
        </div>
    </div>

    <!-- MODAL PROMO -->
    <div id="promoModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Form Kode Promo</h2>
            <form id="promoForm">
                <input type="hidden" id="promoId">
                <div class="form-group">
                    <label>Kode Promo</label>
                    <input type="text" id="promoKode" required>
                </div>
                <div class="form-group">
                    <label>Diskon (%)</label>
                    <input type="number" id="promoDiskon" required>
                </div>
                <div class="form-group">
                    <label>Berlaku Hingga</label>
                    <input type="date" id="promoBerlakuHingga" required>
                </div>
                <button type="submit" class="btn-primary">Simpan</button>
            </form>
        </div>
    </div>

    <!-- MODAL FLASH SALE -->
    <div id="flashSaleModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Form Flash Sale</h2>
            <form id="flashSaleForm">
                <input type="hidden" id="flashSaleId">
                <div class="form-group">
                    <label>Pilih Produk</label>
                    <select id="flashSaleProduk" required>
                        <option value="">-- Pilih Produk --</option>
                        <optgroup label="Produk Unggulan">
                            <option value="Robux Via Gamepass">Robux Via Gamepass</option>
                            <option value="Upgrade Premium">Upgrade Premium</option>
                            <option value="Robux Instant">Robux Instant</option>
                            <option value="Akun Roblox">Akun Roblox</option>
                        </optgroup>
                        <optgroup label="Produk Dalam Game">
                            <option value="Car Driving Indonesia">Car Driving Indonesia</option>
                            <option value="Taxi Boss">Taxi Boss</option>
                            <option value="Steal a Brainrot">Steal a Brainrot</option>
                            <option value="Strongest Battlegrounds">Strongest Battlegrounds</option>
                            <option value="Brookhaven RP">Brookhaven RP</option>
                            <option value="Salon de Fiestas">Salon de Fiestas</option>
                            <option value="Fisch">Fisch</option>
                            <option value="Blox Fruit">Blox Fruit</option>
                            <option value="Grow Garden">Grow Garden</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label>Harga Normal (Rp)</label>
                    <input type="number" id="flashSaleHargaNormal" required>
                </div>
                <div class="form-group">
                    <label>Harga Flash Sale (Rp)</label>
                    <input type="number" id="flashSaleHarga" required>
                </div>
                <div class="form-group">
                    <label>Waktu Mulai</label>
                    <input type="datetime-local" id="flashSaleWaktuMulai" required>
                </div>
                <div class="form-group">
                    <label>Waktu Berakhir</label>
                    <input type="datetime-local" id="flashSaleWaktuBerakhir" required>
                </div>
                <button type="submit" class="btn-primary">Simpan</button>
            </form>
        </div>
    </div>

    <!-- MODAL STOK PRODUK -->
    <div id="stokProdukModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Atur Stok Produk</h2>
            <form id="stokProdukForm">
                <input type="hidden" id="stokProdukId">
                <div class="form-group">
                    <label>Produk</label>
                    <input type="text" id="stokProdukNama" readonly>
                </div>
                <div class="form-group">
                    <label>Stok</label>
                    <input type="number" id="stokProdukJumlah" required min="0">
                </div>
                <button type="submit" class="btn-primary">Simpan</button>
            </form>
        </div>
    </div>

    <script src="../auth/admin-auth.js"></script>
    <script src="../auth/customer-auth.js"></script>
    <script src="../assets/js/dashboard-stats.js"></script>
    <script src="../assets/js/data-manager.js"></script>
    <script src="../assets/js/theme-notification.js"></script>
    <script src="enhanced-script.js"></script>
    <script src="admin.js"></script>
    <script src="../assets/js/sync-system.js"></script>
</body>
</html>
