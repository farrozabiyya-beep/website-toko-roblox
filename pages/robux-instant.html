<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robux Instant (Via Login) - DEV ROBLOX SHOP</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="../assets/css/product-page.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <a href="../index.html" title="Kembali ke Beranda">
                        <img src="../assets/images/logo.jpg" alt="Logo" class="logo-img" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                        <span class="logo-text">DEV ROBLOX SHOP</span>
                    </a>
                </div>
                <div class="hamburger" id="hamburger">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <nav class="nav-menu" id="navMenu">
                    <a href="../index.html" class="nav-link">Home</a>
                    <a href="product.html" class="nav-link">Product</a>
                    <a href="review.html" class="nav-link">Review</a>
                    <a href="contact.html" class="nav-link">Kontak</a>
                    <a href="order.html" class="nav-link order-link">
                        <i class="fas fa-shopping-cart"></i> Pesananku
                    </a>
                </nav>
            </div>
        </nav>
    </header>

    <div class="breadcrumb">
        <div class="container">
            <a href="../index.html">Beranda</a> / 
            <a href="product.html">Produk</a> / 
            <span>Robux Instant (Via Login)</span>
        </div>
    </div>

    <main class="product-page">
        <div class="container">
            <h1 class="page-title">Robux Instant (Via Login)</h1>
            
            <div class="product-container">
                <form class="product-form" id="robuxInstantForm">
                    <div class="form-section">
                        <h3><i class="fas fa-user"></i> 1. Masukkan Username Roblox</h3>
                        <div class="form-group">
                            <label class="form-label">Username</label>
                            <input type="text" class="form-control" id="username" 
                                   placeholder="Masukkan username Roblox Anda" required>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-lock"></i> 2. Masukkan Password</h3>
                        <div class="form-group">
                            <label class="form-label">Password</label>
                            <input type="password" class="form-control" id="password" 
                                   placeholder="Masukkan password akun Anda" required>
                            <small>Password Anda aman dan tidak akan disimpan</small>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-gift"></i> 3. Pilih Jumlah Robux</h3>
                        <div class="robux-items">
                            <div class="robux-item">
                                <div class="robux-icon">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="robux-info">
                                    <span class="robux-amount">80 Robux</span>
                                    <span class="robux-badge">Instant Delivery</span>
                                    <span class="robux-price">Rp 19.500</span>
                                </div>
                                <input type="radio" name="robux" value="80-19500" class="robux-radio">
                            </div>

                            <div class="robux-item">
                                <div class="robux-icon">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="robux-info">
                                    <span class="robux-amount">400 Robux</span>
                                    <span class="robux-badge">Instant Delivery</span>
                                    <span class="robux-price">Rp 91.500</span>
                                </div>
                                <input type="radio" name="robux" value="400-91500" class="robux-radio">
                            </div>

                            <div class="robux-item">
                                <div class="robux-icon">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="robux-info">
                                    <span class="robux-amount">800 Robux</span>
                                    <span class="robux-badge">Instant Delivery</span>
                                    <span class="robux-price">Rp 182.500</span>
                                </div>
                                <input type="radio" name="robux" value="800-182500" class="robux-radio">
                            </div>

                            <div class="robux-item">
                                <div class="robux-icon">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="robux-info">
                                    <span class="robux-amount">1.700 Robux</span>
                                    <span class="robux-badge">Instant Delivery</span>
                                    <span class="robux-price">Rp 365.000</span>
                                </div>
                                <input type="radio" name="robux" value="1700-365000" class="robux-radio">
                            </div>

                            <div class="robux-item">
                                <div class="robux-icon">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="robux-info">
                                    <span class="robux-amount">4.500 Robux</span>
                                    <span class="robux-badge">Instant Delivery</span>
                                    <span class="robux-price">Rp 905.000</span>
                                </div>
                                <input type="radio" name="robux" value="4500-905000" class="robux-radio">
                            </div>

                            <div class="robux-item">
                                <div class="robux-icon">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="robux-info">
                                    <span class="robux-amount">10.000 Robux</span>
                                    <span class="robux-badge">Instant Delivery</span>
                                    <span class="robux-price">Rp 1.802.000</span>
                                </div>
                                <input type="radio" name="robux" value="10000-1802000" class="robux-radio">
                            </div>

                            <div class="robux-item">
                                <div class="robux-icon">
                                    <i class="fas fa-coins"></i>
                                </div>
                                <div class="robux-info">
                                    <span class="robux-amount">22.500 Robux</span>
                                    <span class="robux-badge">Instant Delivery</span>
                                    <span class="robux-price">Rp 3.601.000</span>
                                </div>
                                <input type="radio" name="robux" value="22500-3601000" class="robux-radio">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-credit-card"></i> 4. Metode Pembayaran</h3>
                        <div class="payment-options">
                            <label class="payment-option">
                                <input type="radio" name="paymentMethod" value="gopay" required>
                                <div class="payment-option-content">
                                    <i class="fas fa-wallet"></i>
                                    <span>GoPay - Pembayaran instan melalui aplikasi Gojek</span>
                                </div>
                            </label>
                            <label class="payment-option">
                                <input type="radio" name="paymentMethod" value="dana">
                                <div class="payment-option-content">
                                    <i class="fas fa-wallet"></i>
                                    <span>DANA - Kirim saldo DANA ke nomor yang tertera</span>
                                </div>
                            </label>
                            <label class="payment-option">
                                <input type="radio" name="paymentMethod" value="ovo">
                                <div class="payment-option-content">
                                    <i class="fas fa-wallet"></i>
                                    <span>OVO - Pembayaran cepat via aplikasi OVO</span>
                                </div>
                            </label>
                            <label class="payment-option">
                                <input type="radio" name="paymentMethod" value="shopeepay">
                                <div class="payment-option-content">
                                    <i class="fas fa-wallet"></i>
                                    <span>ShopeePay - Bayar langsung melalui aplikasi ShopeePay</span>
                                </div>
                            </label>
                            <label class="payment-option">
                                <input type="radio" name="paymentMethod" value="qris">
                                <div class="payment-option-content">
                                    <i class="fas fa-qrcode"></i>
                                    <span>QRIS - Bisa untuk semua e-wallet dan bank</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3><i class="fas fa-tag"></i> 5. Kode Promo (Opsional)</h3>
                        <div class="form-group">
                            <label class="form-label">Masukkan Kode Promo</label>
                            <input type="text" class="form-control" id="promoCode" 
                                   placeholder="Masukkan kode promo jika ada...">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="submitBtn" style="width: 100%; padding: 15px; font-size: 1.1rem; font-weight: 700;">
                            <i class="fab fa-whatsapp"></i> Ingin Melanjutkan Pembayaran
                        </button>
                    </div>

                    <div class="info-box">
                        <i class="fas fa-info-circle"></i>
                        <p>⚠️ Jangan bagikan password Anda kepada siapapun. Kami hanya butuh untuk login dan memberikan Robux</p>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>DEV ROBLOX SHOP</h4>
                    <p>Penyedia kebutuhan Roblox terpercaya dan berkualitas</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 DEV ROBLOX SHOP. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <div id="profileModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Menu Profil</h2>
            <a href="order.html" class="modal-link">
                <i class="fas fa-shopping-cart"></i> Pesanan Saya
            </a>
        </div>
    </div>

    <div id="checkoutModal" class="modal">
        <div class="modal-content checkout-modal">
            <span class="close">&times;</span>
            <h2>Konfirmasi Pesanan</h2>
            <div class="checkout-summary">
                <div class="summary-item">
                    <span>Username:</span>
                    <strong id="summaryUsername"></strong>
                </div>
                <div class="summary-item">
                    <span>Robux:</span>
                    <strong id="summaryRobux"></strong>
                </div>
                <div class="summary-item">
                    <span>Harga:</span>
                    <strong id="summaryPrice"></strong>
                </div>
                <div class="summary-item">
                    <span>Metode Pembayaran:</span>
                    <strong id="summaryPayment"></strong>
                </div>
                <hr>
                <div class="summary-item total">
                    <span>Total Harga:</span>
                    <strong id="summaryTotal"></strong>
                </div>
            </div>
            <div id="paymentDetails" class="payment-details"></div>
            <button class="btn btn-primary" id="proceedBtn" onclick="proceedToPaymentInstant()">
                <i class="fab fa-whatsapp"></i> Lanjutkan ke WhatsApp
            </button>
        </div>
    </div>

    <style>
        .robux-badge {
            display: inline-block;
            background-color: var(--success-color);
            color: var(--white);
            padding: 3px 8px;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 5px;
        }
    </style>

    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/product-pages.js"></script>
    <script>
        const checkUsernameBtn = document.getElementById('checkUsernameBtn');
        const robuxInstantForm = document.getElementById('robuxInstantForm');
        const resetBtn = document.getElementById('resetBtn');

        checkUsernameBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value.trim();
            
            if (!username) {
                showNotification('Masukkan username terlebih dahulu', 'error');
                return;
            }

            checkUsernameBtn.disabled = true;
            checkUsernameBtn.classList.add('loading');

            try {
                const isValid = await validateUsername(username);
                const statusElement = document.getElementById('usernameStatus');
                const avatarContainer = document.getElementById('avatarContainer');
                
                if (isValid) {
                    statusElement.innerHTML = '<i class="fas fa-check-circle"></i> Username ditemukan!';
                    statusElement.className = 'username-status valid';
                    
                    const avatarUrl = await getUserAvatar(username);
                    document.getElementById('avatarImage').src = avatarUrl;
                    document.getElementById('usernameDisplay').textContent = username;
                    avatarContainer.style.display = 'block';
                } else {
                    statusElement.innerHTML = '<i class="fas fa-times-circle"></i> Username tidak ditemukan';
                    statusElement.className = 'username-status invalid';
                    avatarContainer.style.display = 'none';
                }
            } catch (error) {
                console.error('Error:', error);
                showNotification('Terjadi kesalahan saat mengecek username', 'error');
            } finally {
                checkUsernameBtn.disabled = false;
                checkUsernameBtn.classList.remove('loading');
            }
        });

        robuxInstantForm.addEventListener('submit', (e) => {
            e.preventDefault();
            handleInstantFormSubmit();
        });

        function handleInstantFormSubmit() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            const robuxSelect = document.querySelector('input[name="robux"]:checked');
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');

            if (!username || !password || !robuxSelect || !paymentMethod) {
                showNotification('Lengkapi semua field yang diperlukan', 'error');
                return;
            }

            const [robuxAmount, price] = robuxSelect.value.split('-');

            document.getElementById('summaryUsername').textContent = username;
            document.getElementById('summaryRobux').textContent = robuxAmount + ' Robux';
            document.getElementById('summaryPrice').textContent = formatCurrency(parseInt(price));
            document.getElementById('summaryPayment').textContent = getPaymentMethodName(paymentMethod.value);
            document.getElementById('summaryTotal').textContent = formatCurrency(parseInt(price));
            document.getElementById('paymentDetails').innerHTML = getPaymentDetails(paymentMethod.value);

            window.currentOrder = {
                username: username,
                robuxAmount: robuxAmount,
                price: parseInt(price),
                paymentMethod: paymentMethod.value,
                type: 'robux-instant'
            };

            document.getElementById('checkoutModal').style.display = 'block';
        }

        function proceedToPaymentInstant() {
            const order = window.currentOrder;
            const message = `Min aku sudah transfer dengan nominal ${formatCurrency(order.price)} dan ini data akun ku ya min

Username: ${order.username}
Nominal Robux Instant yang dipesan: ${order.robuxAmount} Robux

Terima kasih min ditunggu responnya`;

            const phone = '+6281214477714';
            
            createOrder(
                order.username,
                phone,
                [{
                    id: 'robux-instant-' + order.robuxAmount,
                    name: order.robuxAmount + ' Robux Instant',
                    price: order.price,
                    quantity: 1
                }],
                order.paymentMethod
            );

            openWhatsApp(phone, message);

            setTimeout(() => {
                document.getElementById('checkoutModal').style.display = 'none';
                showNotification('Pesanan dibuat! Silahkan kirim bukti transfer ke WhatsApp', 'success');
                setTimeout(() => {
                    window.location.href = 'order.html';
                }, 2000);
            }, 1000);
        }

        resetBtn.addEventListener('click', () => {
            robuxInstantForm.reset();
            document.getElementById('usernameStatus').textContent = '';
            document.getElementById('avatarContainer').style.display = 'none';
            showNotification('Form telah direset', 'info');
        });

        // Close modals
        document.querySelectorAll('.close').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.target.closest('.modal').style.display = 'none';
            });
        });

        window.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });
    </script>
</body>
</html>

